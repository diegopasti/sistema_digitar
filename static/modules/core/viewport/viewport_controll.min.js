function get_session_paramters_freegeoip(){get_session_paramters_internal_ip();$.ajax({type:"get",url:"http://freegeoip.net/json/",success:function(e){SESSION_PARAMTERS.external_ip=e.ip,SESSION_PARAMTERS.country_code=e.country_code.toUpperCase(),SESSION_PARAMTERS.country_name=e.country_name.toUpperCase(),SESSION_PARAMTERS.region_name=e.region_name.toUpperCase(),SESSION_PARAMTERS.region_code=e.region_code.toUpperCase(),SESSION_PARAMTERS.city=e.city.toUpperCase(),SESSION_PARAMTERS.zip_code=e.zip_code,SESSION_PARAMTERS.time_zone=e.time_zone.toUpperCase(),SESSION_PARAMTERS.latitude=e.latitude,SESSION_PARAMTERS.longitude=e.longitude},failure:function(e){}})}function get_session_paramters_ip_api(){get_session_paramters_internal_ip();$.ajax({type:"get",url:"http://ip-api.com/json",success:function(e){SESSION_PARAMTERS.external_ip=e.query,SESSION_PARAMTERS.country_code=e.countryCode.toUpperCase(),SESSION_PARAMTERS.country_name=e.country.toUpperCase(),SESSION_PARAMTERS.region_name=e.regionName.toUpperCase(),SESSION_PARAMTERS.region_code=e.region.toUpperCase(),SESSION_PARAMTERS.city=e.city.toUpperCase(),SESSION_PARAMTERS.zip_code=e.zip,SESSION_PARAMTERS.time_zone=e.timezone.toUpperCase(),SESSION_PARAMTERS.latitude=e.lat,SESSION_PARAMTERS.longitude=e.lon},failure:function(e){}})}function get_session_paramters_internal_ip(){window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;var e=new RTCPeerConnection({iceServers:[]}),n=function(){};e.createDataChannel(""),e.createOffer(e.setLocalDescription.bind(e),n),e.onicecandidate=function(_){if(_&&_.candidate&&_.candidate.candidate){var t=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/.exec(_.candidate.candidate)[1];t.indexOf(":")>=0?(alert("IPv6: "+t),null==SESSION_PARAMTERS.internal_ipv6&&(SESSION_PARAMTERS.internal_ipv6=t)):t.indexOf(".")>=0&&null==SESSION_PARAMTERS.internal_ipv4&&(SESSION_PARAMTERS.internal_ipv4=t),e.onicecandidate=n}}}function verify_session_paramters(){try{get_session_paramters_freegeoip()}catch(e){get_session_paramters_ip_api()}}function report_session_paramters(){var e=jQuery("[name=csrfmiddlewaretoken]").val();SESSION_PARAMTERS.csrfmiddlewaretoken=e,$.ajax({type:"POST",url:"/api/user/session/register",data:SESSION_PARAMTERS,success:function(e){alert("olha o que veio: "+JSON.stringify(e))},failure:function(e){alert("Erro na hora de salvar a sessao")}})}function verify_screen_paramters(){return screen_width=window.innerWidth,screen_height=window.innerHeight,SCREEN_PARAMTERS.screen_width=screen_width,SCREEN_PARAMTERS.screen_height=screen_height,screen_width<=240?SCREEN_PARAMTERS.screen_model=0:screen_width<=320?SCREEN_PARAMTERS.screen_model=1:screen_width<=480?SCREEN_PARAMTERS.screen_model=2:screen_width<=640?SCREEN_PARAMTERS.screen_model=3:screen_width<=800?SCREEN_PARAMTERS.screen_model=4:screen_width<=1024?SCREEN_PARAMTERS.screen_model=5:screen_width<=1366?SCREEN_PARAMTERS.screen_model=6:screen_width<=1680?SCREEN_PARAMTERS.screen_model=7:screen_width<=1920?SCREEN_PARAMTERS.screen_model=8:SCREEN_PARAMTERS.screen_model=9,pagination_itens_per_page=parseInt(screen_height/26-12),pagination_itens_per_page<2&&(pagination_itens_per_page=2),table_minimal_rows=Array.apply(null,Array(pagination_itens_per_page)).map(function(e,n){return n}),total_rows_height=28*pagination_itens_per_page,SCREEN_PARAMTERS.table_maximun_items_per_page=pagination_itens_per_page,SCREEN_PARAMTERS.table_maximun_body_height=total_rows_height,SCREEN_PARAMTERS.table_minimun_items=table_minimal_rows,SCREEN_PARAMTERS}function configure_screen(){SCREEN_PARAMTERS.screen_width<600?$("#profile_email_active").hide():$("#profile_email_active").show()}function start_load_page(){SESSION_PARAMTERS.init_load_page=Date.now()}function terminate_load_page(){SESSION_PARAMTERS.load_page_duration=Date.now()-SESSION_PARAMTERS.init_load_page;try{document.getElementById("session_action_info").innerHTML="Página carregada em "+SESSION_PARAMTERS.load_page_duration+"ms.",$("#footer_session_action").fadeIn(100),setTimeout(function(){$("#footer_session_action").fadeOut(5e3)},5e3)}catch(e){}}function terminate_setup(){SESSION_PARAMTERS.setup_page_duration=Date.now()-SESSION_PARAMTERS.init_load_page,SESSION_PARAMTERS.setup_page_duration=SESSION_PARAMTERS.setup_page_duration-SESSION_PARAMTERS.load_page_duration;try{document.getElementById("session_action_info").innerHTML="Página carregada em "+SESSION_PARAMTERS.load_page_duration+"ms e finalizada em "+SESSION_PARAMTERS.setup_page_duration+"ms.",$("#footer_session_action").fadeIn(100),setTimeout(function(){$("#footer_session_action").fadeOut(5e3)},5e3)}catch(e){}}function register_action(e,n){var _=Date.now()-e;_/=1e3;try{document.getElementById("session_action_info").innerHTML="Requisição processado em "+_+"ms.",$("#footer_session_action").fadeIn(100),setTimeout(function(){$("#footer_session_action").fadeOut(5e3)},5e3)}catch(e){}}var SCREEN_PARAMTERS={};SCREEN_PARAMTERS.screen_width="",SCREEN_PARAMTERS.screen_height="",SCREEN_PARAMTERS.screen_model="",SCREEN_PARAMTERS.table_maximun_items_per_page="",SCREEN_PARAMTERS.table_maximun_body_height="",SCREEN_PARAMTERS.table_minimun_items="";var SESSION_PARAMTERS={};SESSION_PARAMTERS.init_load_page="",SESSION_PARAMTERS.load_page_duration="",SESSION_PARAMTERS.setup_page_duration="",SESSION_PARAMTERS.external_ip=null,SESSION_PARAMTERS.internal_ipv4=null,SESSION_PARAMTERS.internal_ipv6=null,SESSION_PARAMTERS.country_code="",SESSION_PARAMTERS.country_name="",SESSION_PARAMTERS.region_name="",SESSION_PARAMTERS.city="",SESSION_PARAMTERS.zip_code="",SESSION_PARAMTERS.time_zone="",SESSION_PARAMTERS.latitude="",SESSION_PARAMTERS.longitude="",window.onresize=function(e){SCREEN_PARAMTERS=verify_screen_paramters(),configure_screen();try{post_screen_verified()}catch(e){}},start_load_page();verify_screen_paramters();